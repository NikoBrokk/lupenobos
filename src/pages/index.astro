---
import Hero from "../components/Hero.astro";
import ArticleCard from "../components/ArticleCard.astro";
import { getCollection } from "astro:content";

const articles = (await getCollection("articles"))
  .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
---

<Hero />

<section class="mx-auto max-w-5xl px-6 md:px-12 py-10">
  <h2 class="sr-only">Siste</h2>

  {articles.length === 0 ? (
    <p>Ingen artikler enn√•. Kommer snart!</p>
  ) : (
    <div class="grid gap-6">
      {articles.map((a) => (
        <ArticleCard
          title={a.data.title}
          href={`/articles/${a.slug}/`}
          excerpt={a.data.description}
          date={a.data.pubDate.toLocaleDateString('no-NO')}
          image={a.data.image}
          tag={a.data.tag}
        />
      ))}
    </div>
  )}
</section>
